From 40dbb0f4ea62ec710cae28fcf32ead7fc333ecf2 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Konrad=20Vit=C3=A9?= <kvite@paktolos.net>
Date: Wed, 7 Jan 2026 12:41:07 +0100
Subject: [PATCH] v1arch: {set,next,bulk}_cmd: Implement timeout handling
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Those commands were missed in commit:
    bd57190 2025-05-01 Implemented v1arch timeout handling. Enabled test cases.

Signed-off-by: Konrad Vit√© <kvite@paktolos.net>
---
 pysnmp/hlapi/v1arch/asyncio/cmdgen.py | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/pysnmp/hlapi/v1arch/asyncio/cmdgen.py b/pysnmp/hlapi/v1arch/asyncio/cmdgen.py
index 3d87c3cf..696e1e9c 100644
--- a/pysnmp/hlapi/v1arch/asyncio/cmdgen.py
+++ b/pysnmp/hlapi/v1arch/asyncio/cmdgen.py
@@ -262,6 +262,10 @@ def __callback(snmpDispatcher, stateHandle, errorIndication, rspPdu, cbCtx):
         if future.cancelled():
             return
 
+        if isinstance(errorIndication, errind.RequestTimedOut):
+            future.set_result((errorIndication, 0, 0, ()))
+            return
+
         errorStatus = pMod.apiPDU.get_error_status(rspPdu)
         errorIndex = pMod.apiPDU.get_error_index(rspPdu)
 
@@ -405,6 +409,10 @@ def __callback(
         if future.cancelled():
             return
 
+        if isinstance(errorIndication, errind.RequestTimedOut):
+            future.set_result((errorIndication, 0, 0, ()))
+            return
+
         if (
             options.get("ignoreNonIncreasingOid", False)
             and errorIndication
@@ -569,6 +577,10 @@ def __callback(
         if future.cancelled():
             return
 
+        if isinstance(errorIndication, errind.RequestTimedOut):
+            future.set_result((errorIndication, 0, 0, ()))
+            return
+
         if (
             options.get("ignoreNonIncreasingOid", False)
             and errorIndication
-- 
2.52.0

